var helpStr = 'treeview:\n';
+'addListFormFolder(node, folder, format)	参数: node 节点， folder 文件夹，format 格式如\'png|jpg\'	从文件夹创建树形图\n'
+'removeEmptyNode(node)	参数: node 节点		从指定节点开始遍历，删除没有item的节点,\n'
+'expandAllNode(node)	参数: node 节点		从指定节点开始遍历，展开所有节点\n';

module.exports = {
	help : helpStr,
	addListFromFolder: function (node, folder, format) {//从文件夹创建树形图（节点，文件夹，格式(例如'png|jpg')）
		var pathFiles = folder.getFiles();
		for(var i = 0; i < pathFiles.length; i++) {
			if (pathFiles[i] instanceof Folder){
				if(pathFiles[i].name.match(/^\(.*\)$/)) {
					continue;
				}
				var newNode = node.add('node', File.decode(pathFiles[i].name));
				newNode.source = pathFiles[i];
				arguments.callee(newNode, pathFiles[i], format);
			}else {
				if(format == null) {
					//node.add('item', File.decode(pathFiles[i].name));
					continue;
				}
				if(eval("pathFiles[i].name.match(/\.(" + format + ")$/)")) {
					var newItem = node.add('item', File.decode(pathFiles[i].name));
					newItem.source = pathFiles[i];
					/*var imageFile = File(pathFiles[i].path + '/' + eval("pathFiles[i].name.replace(/(" + format + ")$/,'')") + 'png');
					if(imageFile.exists) {
						newItem.image = imageFile;
					}*/
				}
			}
		}
	},
	removeEmptyNode: function (node) {//删除没有item的节点(节点)
		for(var len = node.items.length, i = len - 1; i >= 0; i--) {
			if(node.items[i].type == 'node') {
				arguments.callee(node.items[i]);
				if(node.items[i].items.length == 0) {
					node.remove(node.items[i]);
				}
			}
		}
	},
	expandAllNode: function (node) {//展开所有节点（节点）
		node.expanded = 1;
		for(var i = 0; i < node.items.length; i++) {
			if(node.items[i].type == 'node') {
				arguments.callee(node.items[i]);
			}
		}
	}
}